{% extends "base.html" %}
{% block content %}

<h3 class="section-title">Food Image Analysis</h3>

<div class="card-metric col-md-6">

<form method="post" enctype="multipart/form-data" onsubmit="showLoading()">

<label class="mb-2">Upload Food Image</label>
<input class="form-control mb-3" type="file" name="food_image"
       accept="image/*" onchange="previewImage(event)" required>

<!-- Preview -->
<img id="preview" class="img-fluid rounded mb-3"
     style="display:none; max-height:300px;">

<button id="analyzeBtn" class="btn btn-primary-soft">
    Run AI Detection
</button>

<!-- Spinner -->
<div id="loading" class="mt-3" style="display:none;">
    <div class="spinner-border text-success"></div>
    <div>Analyzing image with AI model...</div>
</div>

</form>

</div>

<script>
function previewImage(event) {
    const img = document.getElementById('preview');
    img.src = URL.createObjectURL(event.target.files[0]);
    img.style.display = "block";
}

function showLoading() {
    document.getElementById("loading").style.display = "block";
    document.getElementById("analyzeBtn").disabled = true;
}
</script>

{% endblock %}
